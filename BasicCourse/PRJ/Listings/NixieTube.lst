C51 COMPILER V9.54   NIXIETUBE                                                             09/02/2022 22:34:31 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE NIXIETUBE
OBJECT MODULE PLACED IN .\Objects\NixieTube.obj
COMPILER INVOKED BY: D:\ying_yong\keil5\C51\BIN\C51.EXE ..\CODE\NixieTube.c COMPACT OPTIMIZE(8,SPEED) BROWSE INCDIR(..\I
                    -NC) DEBUG OBJECTEXTEND PRINT(.\Listings\NixieTube.lst) TABS(2) OBJECT(.\Objects\NixieTube.obj)

line level    source

   1          #include "NixieTube.h"
   2          #if SMG_
   3          static void show_number (int location,int number);
   4          static void dynamic_display(int begin_location,int over_location,int *arr)reentrant;
   5          unsigned char code table[]={0x3f,0x06,0x5b,0x4f,
   6                                 0x66,0x6d,0x7d,0x07,
   7                                 0x7f,0x6f,0x77,0x7c,
   8                                 0x39,0x5e,0x79,0x71};
   9          unsigned char code location_arr[]={0xff,0xfe,0xfd,0xfb,0xf7,0xef,0xdf};
  10          /**
  11            * @brief          初始化数码管对象
  12            * @param[in]      object：数码管对象指针
  13            * @retval         NULL
  14            */
  15          void nixie_tube_init(create_nixie_tube *object)
  16          {
  17   1        unsigned char i=5;
  18   1        for(i=0;i<=5;i++)
  19   1        {
  20   2          object->arr[i]=0;
  21   2        }
  22   1        object->show_number=show_number;
  23   1        object->dynamic_display=dynamic_display;
  24   1        
  25   1      }
  26          /**
  27            * @brief          静态显示数字
  28            * @param[in]      location：要显示的数码管位置（1-6）
  29            *                 number：显示的数字
  30            * @retval         NULL
  31            */
  32          static void show_number (int location,int number)
  33          {
  34   1      #if _C51==1
  35   1            U1=1;
  36   1            P0=table[number];
  37   1            U1=0;
  38   1            P0=location_arr[0];
  39   1        
  40   1            U2=1;
  41   1            P0=location_arr[location];
  42   1            U2=0;
  43   1      #else
                  switch(location)   //位选，选择点亮的数码管，
                  {
                     case(1):
                      LSA=1;LSB=1;LSC=1; break;//显示第0位
                    case(2):
                      LSA=0;LSB=1;LSC=1; break;//显示第1位
                    case(3):
                      LSA=1;LSB=0;LSC=1; break;//显示第2位
                    case(4):  
                      LSA=0;LSB=0;LSC=1; break;//显示第3位
                    case(5):
C51 COMPILER V9.54   NIXIETUBE                                                             09/02/2022 22:34:31 PAGE 2   

                      LSA=1;LSB=1;LSC=0; break;//显示第4位
                    case(6):
                      LSA=0;LSB=1;LSC=0; break;//显示第5位
                    case(7):
                      LSA=1;LSB=0;LSC=0; break;//显示第6位
                    case(8):
                      LSA=0;LSB=0;LSC=0; break;//显示第7位  
                  }
                  P0=table[number];//发送段码
                
              #endif  
  66   1            
  67   1      }
  68          /**
  69            * @brief          动态显示数字
  70            * @param[in]      begin_location：数码管起始
  71            *                 over_location： 数码管结束  
  72            *                 arr：数组指针：要显示的数组放这里
  73            *                 注意此函数不要在定时器中断里使用
  74            * @retval         NULL
  75            */
  76          static void dynamic_display(int begin_location,int over_location,int *arr)reentrant
  77          {
  78   1         int i=1;
  79   1         for(i=begin_location;i<=over_location;i++)
  80   1        {
  81   2            show_number(i,arr[i-1]);
  82   2            delayms(1);
  83   2        }
  84   1      
  85   1      
  86   1      }
  87          #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    311    ----
   CONSTANT SIZE    =     23    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----       3
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
