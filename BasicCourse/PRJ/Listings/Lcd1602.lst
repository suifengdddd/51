C51 COMPILER V9.54   LCD1602                                                               09/25/2022 10:22:41 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\Lcd1602.obj
COMPILER INVOKED BY: D:\ying_yong\keil5\C51\BIN\C51.EXE ..\CODE\Lcd1602.c COMPACT OPTIMIZE(8,SPEED) BROWSE INCDIR(..\INC
                    -) DEBUG OBJECTEXTEND PRINT(.\Listings\Lcd1602.lst) TABS(2) OBJECT(.\Objects\Lcd1602.obj)

line level    source

   1          #include "Lcd1602.h"
   2          #if LCD1602_
   3          static void write_com(uint8 com);
   4          static void write_data(uint8 data_);
   5          static void show_data(uint8 *lcd_data,uint8 location)reentrant;
   6          /**
   7            * @brief          LCD1602初始函数
   8            * @param[in]      lcd_object：LCD1602对象指针
   9            * @retval         NULL
  10            */
  11          void lcd1602_init(create_lcd *lcd_object)
  12          {
  13   1        lcd_object->write_com=write_com;
  14   1        lcd_object->show_data=show_data;
  15   1        lcden=0;
  16   1        U1=0;
  17   1        U2=0;
  18   1        write_com(0x38);
  19   1        write_com(0x0c);
  20   1        write_com(0x06);
  21   1        write_com(0x01);
  22   1        
  23   1      }
  24            /**
  25            * @brief          LCD1602命令操作函数
  26            * @param[in]      com：LCD1602命令
  27            * @retval         NULL
  28            */
  29          static void write_com(uint8 com)
  30          {
  31   1        lcdrs=0;
  32   1        P0=com;
  33   1        delay(5);
  34   1        lcden=1;
  35   1        delay(5);
  36   1        lcden=0;
  37   1      }
  38          static void write_data(uint8 data_)
  39          {
  40   1        lcdrs=1;
  41   1        P0=data_;
  42   1        delay(5);
  43   1        lcden=1;
  44   1        delay(5);
  45   1        lcden=0;
  46   1      }
  47            /**
  48            * @brief          LCD1602显示数据函数
  49            * @param[in]      com：*lcd_data要显示的数据指针（可以传入数组名字，也可以是字符串）
  50            *                 location 显示位置
  51            * @retval         NULL
  52            */
  53          static void show_data(uint8 *lcd_data,uint8 location)reentrant
  54          {
C51 COMPILER V9.54   LCD1602                                                               09/25/2022 10:22:41 PAGE 2   

  55   1          int count=0;
  56   1          int i=0;
  57   1          uint8 * temp=lcd_data;
  58   1           while(*temp)
  59   1           {
  60   2             count++;
  61   2             temp++;
  62   2           }
  63   1           write_com(location);
  64   1           for(i=0;i<count;i++)
  65   1          {
  66   2             write_data(lcd_data[i]);
  67   2             delay(5);
  68   2          }
  69   1      }
  70          #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    349    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----       3
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
