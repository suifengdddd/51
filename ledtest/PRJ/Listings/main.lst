C51 COMPILER V9.54   MAIN                                                                  09/23/2022 12:52:07 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\ying_yong\keil5\C51\BIN\C51.EXE ..\SRC\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\INC) DEBUG OBJE
                    -CTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include "STC51.h"
   2          /*在开始写代码之前请思考需要使用什么外设*/
   3          /*****然后再STC51.h里打开相应外设*******/
   4          /***********这里不要改变哦**************/
   5          /*************开始*********************/
   6          #if TIME_
   7          create_time c51_time;
   8          #endif
   9          
  10          #if KEY_
  11          create_key c51_key; 
  12          #endif
  13          
  14          #if LED_
  15          create_led c51_led;
  16          #endif
  17          
  18          #if BEEP_
              create_beep c51_beep;
              #endif
  21          
  22          #if SMG_
  23          create_nixie_tube c51_nixie_tube;
  24          #endif
  25          
  26          #if USART
              create_usart c51_usart;
              #endif
  29          
  30          #if DS18B20_
              create_temp c51_ds18b20;
              #endif
  33              
  34          #if LCD1602_
              create_lcd c51_lcd1602;
              #endif
  37          /***************结束*********************/
  38          void main()
  39          {
  40   1          
  41   1      /***********这里对各外设进行初始化**************/
  42   1      /********************开始**********************/   
  43   1          #if LED_//led
  44   1          led_init(&c51_led);
  45   1          #endif
  46   1        
  47   1          #if KEY_//按键
  48   1          key_init(&c51_key);
  49   1          #endif
  50   1        
  51   1          #if BEEP_//嗡鸣器
                  beep_init(&c51_beep);
                  #endif
  54   1        
C51 COMPILER V9.54   MAIN                                                                  09/23/2022 12:52:07 PAGE 2   

  55   1          #if SMG_//数码管
  56   1          nixie_tube_init(&c51_nixie_tube); 
  57   1          #endif
  58   1        
  59   1          #if DS18B20_//ds18b20
                  temp_init(&c51_ds18b20);
                  #endif
  62   1          
  63   1          #if LCD1602_//LCD
                  lcd1602_init(&c51_lcd1602);
                  #endif
  66   1      /********************结束**********************/  
  67   1      
  68   1      /****************定时器初始化******************/
  69   1      #if TIME_ 
  70   1          //打开/关闭定时器0    
  71   1          c51_time.time0=TIME0ON;
  72   1           //定时器0中断周期（1-70）
  73   1          c51_time.time0_ms=50;
  74   1          //打开/关闭定时器1  
  75   1          c51_time.time1=TIME1ON;
  76   1          //定时器1中断周期（1-70）
  77   1          c51_time.time1_ms=30;
  78   1          c51_time.time_type=0;
  79   1          time_init(&c51_time);
  80   1      #endif
  81   1      /******************结束***********************/ 
  82   1      
  83   1      /****************串口初始化*******************/
  84   1      #if USART
                  //设置波特率为9600
                  c51_usart.baud_rate=9600;
                  usart_init(&c51_usart);
              #endif    
  89   1      /******************结束***********************/ 
  90   1      
  91   1          
  92   1      
  93   1      
  94   1         
  95   1      
  96   1          while(1)
  97   1          {
  98   2             
  99   2          }
 100   1      
 101   1        
 102   1          
 103   1        
 104   1      }
 105          #if USART
              void usart_rx_func_handle (void)
              {
                  
                       
              }
              #endif
 112          #if TIME_  
 113          void time_run_func_handle(void)
 114          {
 115   1         static int time0_i=0;
 116   1         static int time1_i=0;
C51 COMPILER V9.54   MAIN                                                                  09/23/2022 12:52:07 PAGE 3   

 117   1        if(c51_time.time_type==TIME0)
 118   1        {
 119   2          
 120   2      
 121   2           
 122   2      
 123   2          
 124   2        
 125   2           time0_i++;
 126   2      
 127   2           if(time0_i<=10)
 128   2           {
 129   3             c51_led.led_on(1);
 130   3           }
 131   2           else if(time0_i>10&&time0_i<=20)
 132   2           {
 133   3              c51_led.led_off(1);
 134   3           }
 135   2           if(time0_i>20)
 136   2           {
 137   3             time0_i=0;
 138   3           }
 139   2          
 140   2        }
 141   1        else if(c51_time.time_type==TIME1)
 142   1        {
 143   2         
 144   2      
 145   2           if(time1_i<=10)
 146   2           {
 147   3             c51_led.led_on(3);
 148   3           }
 149   2           else if(time1_i>10&&time1_i<=20)
 150   2           {
 151   3              c51_led.led_off(3);
 152   3           }
 153   2           if(time1_i>20)
 154   2           {
 155   3             time1_i=0;
 156   3           }
 157   2        
 158   2          time1_i++;
 159   2      
 160   2      
 161   2        
 162   2        }
 163   1        
 164   1        
 165   1        c51_time.time_type=0;
 166   1        
 167   1      }
 168          #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    260    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     57    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.54   MAIN                                                                  09/23/2022 12:52:07 PAGE 4   

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
